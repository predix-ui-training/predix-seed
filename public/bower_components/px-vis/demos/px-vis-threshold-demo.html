<link rel="import" href="../../polymer/polymer.html">

<link rel="import" href="../px-vis-scale.html">
<link rel="import" href="../px-vis-svg.html">
<link rel="import" href="../px-vis-threshold.html">

<dom-module id="px-vis-threshold-demo">
  <link rel="import" type="css" href="../css/px-vis-demo.css"/>
  <template>
    <p id="px-vis-threshold-anchor" class="epsilon demo__title">px-vis-threshold</p>
    <div class="demo u-p+">
      <div class="outline">

      <!-- need for threshold -->
      <px-vis-svg
        width="[[width]]"
        height="[[height]]"
        margin="[[margin]]"
        svg="{{svg}}">
      </px-vis-svg>
      <px-vis-scale
        x-axis-type="time"
        y-axis-type="linear"
        complete-series-config="[[seriesConfig]]"
        chart-extents="[[chartExtents]]"
        width="[[width]]"
        height="[[height]]"
        margin="[[margin]]"
        chart-data={{chartData}}
        x="{{x}}"
        y="{{y}}"
        domain-changed='{{domainChanged}}'
        current-domain-x="{{currentDomainX}}"
        current-domain-y="{{currentDomainY}}"
        selected-domain="[[selectedDomain]]">
      </px-vis-scale>
      <px-vis-threshold
        svg="[[svg]]"
        complete-series-config="[[seriesConfig]]"
        chart-data="[[thresholdData]]"
        x="[[x]]"
        y="[[y]]"
        current-domain-x="[[currentDomainX]]"
        current-domain-y="[[currentDomainY]]">
      </px-vis-threshold>


      </div>
      <div class="demo__discription">

        <p class="u-mt0">Chart threshold provide horizonal lines across the chart.</p>
        <p>A default color is used if no 'color' is specified (or if the color does not match a series name). When a valid 'color' is given the threshold color will match that of the series.</p>
        <p>The demo chart shows both, one threshold with a valid 'color' and one with no 'color'.</p>

      </div>
    </div>
    <div>
      <px-demo-snippet
        element-properties="[[elempropThreshold]]"
        element-name="px-vis-threshold"
        code-link="http://codepen.io/menkhakl/pen/amEGav">
      </px-demo-snippet>
    </div>

  </template>
  <script>
    Polymer({
      is: "px-vis-threshold-demo",
      properties:{
        //basics
        width: {
          type : Number,
          value : 500
        },
        height:{
          type : Number,
          value : 200
        },
        margin:{
          type : Object,
          value : {
            "top": 10,
            "right": 10,
            "bottom": 10,
            "left": 10
          }
        },
        chartData:{
          type : Array,
          value : [{
              'x': 1397102460000,
              'y': 0.56
            },{
              'x': 1397139660000,
              'y': 0.4
            },{
              'x': 1397177400000,
              'y': 0.43
            },{
              'x': 1397228040000,
              'y': 0.33
            },{
              'x': 1397248260000,
              'y': 0.47
            },{
              'x': 1397291280000,
              'y': 0.41
            },{
              'x': 1397318100000,
              'y': 0.26
            },{
              'x': 1397342100000,
              'y': 0.42
            },{
              'x': 1397390820000,
              'y': 0.27
            },{
              'x': 1397408100000,
              'y': 0.38
            },{
              'x': 1397458800000,
              'y': 0.36
            },{
              'x': 1397522940000,
              'y': 0.32
          }]
        },
        seriesConfig:{
          type : Object,
          value: {
            'mySeries': {
              "name":"My-Series",
              "type": "line",
              "x": 'x',
              "y": 'y',
              'color': "rgb(93,165,218)"
            }
          }
        },
        thresholdData:{
          type : Array,
          value: [
            { "for":"mySeries", "type":"mean", "value":0.5 },
            { "type":"mine", "value":0.25 }
          ],
        },
        //chartExtents
        chartExtents:{
          type : Object,
          value: {
            "x": [Infinity,-Infinity],
            "y": [0,-Infinity]
          }
        },
        // demo snippet
        elempropThreshold:{
          type : Object,
          value:{
            "svg":"[[svg]]",
            "completeSeriesConfig":"[[seriesConfig]]",
            "chartData":"[[thresholdData]]",
            "x":"[[x]]",
            "y":"[[y]]",
            "currentDomainX":"[[currentDomainX]]",
            "currentDomainY":"[[currentDomainY]]"
          }
        }
      }
    });
  </script>
</dom-module>
